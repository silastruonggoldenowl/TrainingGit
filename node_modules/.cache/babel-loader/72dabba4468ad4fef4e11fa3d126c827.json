{"ast":null,"code":"import _regeneratorRuntime from\"/home/silas/Desktop/Program/goldenOwl/TrainingGit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/silas/Desktop/Program/goldenOwl/TrainingGit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"/home/silas/Desktop/Program/goldenOwl/TrainingGit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/silas/Desktop/Program/goldenOwl/TrainingGit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/silas/Desktop/Program/goldenOwl/TrainingGit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/silas/Desktop/Program/goldenOwl/TrainingGit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from\"react-redux\";import{Redirect}from\"react-router-dom\";import{withRouter}from\"react-router\";import{Formik}from\"formik\";import firebaseConfig from\"../config/configFirebase\";import{signUpAction,signInWithFbAction}from\"../store/actions/authActions\";var Register=/*#__PURE__*/function(_React$Component){_inherits(Register,_React$Component);var _super=_createSuper(Register);function Register(){var _this;_classCallCheck(this,Register);_this=_super.call(this);_this.onSubmitForm=function(values){// eslint-disable-next-line no-unused-vars\nvar logUpHandler=_this.props.logUpHandler;var email=values.email,password=values.password;firebaseConfig.firebase.auth().createUserWithEmailAndPassword(email,password).then(function(){logUpHandler();}).catch(function(err){alert(err);});};_this.formView=function(props){var isSubmitting=props.isSubmitting,errors=props.errors,handleSubmit=props.handleSubmit,handleChange=props.handleChange,touched=props.touched,handleBlur=props.handleBlur;return/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"display-4 font-weight-bold mb-3\",children:\"Sign Up\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border border-1 p-2 my-1 w-100 form-control\",placeholder:\"Username\",name:\"email\",onChange:handleChange,onBlur:handleBlur}),/*#__PURE__*/_jsx(\"div\",{children:errors.email&&touched.email&&errors.email||\" \"}),/*#__PURE__*/_jsx(\"input\",{className:\"border border-1 p-2 my-1 w-100 form-control\",placeholder:\"Password\",name:\"password\",type:\"Password\",onChange:handleChange,onBlur:handleBlur}),/*#__PURE__*/_jsx(\"div\",{children:errors.password&&touched.password&&errors.password}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isSubmitting,className:\"btn btn-primary my-1 w-100\",children:\"Sign Up\"}),/*#__PURE__*/_jsx(\"div\",{onClick:_this.onClickSignUpWithFB,\"aria-hidden\":\"true\",className:\"btn btn-success my-1 w-100\",children:\"Sign in with FB\"})]})});};_this.onClickSignUpWithFB=function(){firebaseConfig.firebase.auth().signInWithPopup(firebaseConfig.FBProvider).then(_this.handlerLoginWithFB).catch(function(error){console.log(error);});};_this.handlerLoginWithFB=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(result){var signInWithFB;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:signInWithFB=_this.props.signInWithFB;signInWithFB(result.user.email);case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={};return _this;}_createClass(Register,[{key:\"render\",value:function render(){var _this$props=this.props,authState=_this$props.authState,location=_this$props.location;if(authState.signIn){var _location$state;return/*#__PURE__*/_jsx(Redirect,{to:(location===null||location===void 0?void 0:(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.from)||\"/\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"todo-list text-center\",children:/*#__PURE__*/_jsx(Formik,{className:\"w-100\",initialValues:{email:\"\",password:\"\"},validate:function validate(values){var errors={};if(!values.email){errors.email=\"Required\";}else if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)){errors.email=\"Invalid email address\";}if(!values.password){errors.password=\"Required\";}return errors;},onSubmit:this.onSubmitForm,children:this.formView})});}}]);return Register;}(React.Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return{logUpHandler:function logUpHandler(data){dispatch(signUpAction(data));},signInWithFB:function signInWithFB(data){dispatch(signInWithFbAction(data));}};};var mapStateToProps=function mapStateToProps(state){return{authState:state.authState};};Register.defaultProps={logUpHandler:undefined,authState:{},location:{},signInWithFB:undefined};export default connect(mapStateToProps,mapDispatchToProps)(withRouter(Register));","map":{"version":3,"sources":["/home/silas/Desktop/Program/goldenOwl/TrainingGit/src/pages/Register.jsx"],"names":["React","connect","Redirect","withRouter","Formik","firebaseConfig","signUpAction","signInWithFbAction","Register","onSubmitForm","values","logUpHandler","props","email","password","firebase","auth","createUserWithEmailAndPassword","then","catch","err","alert","formView","isSubmitting","errors","handleSubmit","handleChange","touched","handleBlur","onClickSignUpWithFB","signInWithPopup","FBProvider","handlerLoginWithFB","error","console","log","result","signInWithFB","user","state","authState","location","signIn","from","test","Component","mapDispatchToProps","dispatch","data","mapStateToProps","defaultProps","undefined"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { PropTypes } from \"prop-types\";\nimport { Redirect } from \"react-router-dom\";\nimport { withRouter } from \"react-router\";\nimport { Formik } from \"formik\";\nimport firebaseConfig from \"../config/configFirebase\";\nimport { signUpAction, signInWithFbAction } from \"../store/actions/authActions\";\n\nclass Register extends React.Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  onSubmitForm = (values) => {\n    // eslint-disable-next-line no-unused-vars\n    const { logUpHandler } = this.props;\n    const { email, password } = values;\n    firebaseConfig.firebase\n      .auth()\n      .createUserWithEmailAndPassword(email, password)\n      .then(() => {\n        logUpHandler();\n      })\n      .catch((err) => {\n        alert(err);\n      });\n  };\n\n  formView = (props) => {\n    const {\n      isSubmitting,\n      errors,\n      handleSubmit,\n      handleChange,\n      touched,\n      handleBlur,\n    } = props;\n    return (\n      <form onSubmit={handleSubmit}>\n        <div className=\"\">\n          <h2 className=\"display-4 font-weight-bold mb-3\">Sign Up</h2>\n          <input\n            className=\"border border-1 p-2 my-1 w-100 form-control\"\n            placeholder=\"Username\"\n            name=\"email\"\n            onChange={handleChange}\n            onBlur={handleBlur}\n          />\n          <div>{(errors.email && touched.email && errors.email) || \" \"}</div>\n          <input\n            className=\"border border-1 p-2 my-1 w-100 form-control\"\n            placeholder=\"Password\"\n            name=\"password\"\n            type=\"Password\"\n            onChange={handleChange}\n            onBlur={handleBlur}\n          />\n          <div>{errors.password && touched.password && errors.password}</div>\n          <button\n            type=\"submit\"\n            disabled={isSubmitting}\n            className=\"btn btn-primary my-1 w-100\"\n          >\n            Sign Up\n          </button>\n\n          <div\n            onClick={this.onClickSignUpWithFB}\n            aria-hidden=\"true\"\n            className=\"btn btn-success my-1 w-100\"\n          >\n            Sign in with FB\n          </div>\n        </div>\n      </form>\n    );\n  };\n\n  onClickSignUpWithFB = () => {\n    firebaseConfig.firebase\n      .auth()\n      .signInWithPopup(firebaseConfig.FBProvider)\n      .then(this.handlerLoginWithFB)\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  handlerLoginWithFB = async (result) => {\n    const { signInWithFB } = this.props;\n    signInWithFB(result.user.email);\n  };\n\n  render() {\n    const { authState, location } = this.props;\n    if (authState.signIn) {\n      return <Redirect to={location?.state?.from || \"/\"} />;\n    }\n    return (\n      <div className=\"todo-list text-center\">\n        <Formik\n          className=\"w-100\"\n          initialValues={{ email: \"\", password: \"\" }}\n          validate={(values) => {\n            const errors = {};\n            if (!values.email) {\n              errors.email = \"Required\";\n            } else if (\n              !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)\n            ) {\n              errors.email = \"Invalid email address\";\n            }\n            if (!values.password) {\n              errors.password = \"Required\";\n            }\n            return errors;\n          }}\n          onSubmit={this.onSubmitForm}\n        >\n          {this.formView}\n        </Formik>\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  logUpHandler: (data) => {\n    dispatch(signUpAction(data));\n  },\n  signInWithFB: (data) => {\n    dispatch(signInWithFbAction(data));\n  },\n});\nconst mapStateToProps = (state) => ({\n  authState: state.authState,\n});\n\nRegister.defaultProps = {\n  logUpHandler: undefined,\n  authState: {},\n  location: {},\n  signInWithFB: undefined,\n};\n\nRegister.propTypes = {\n  authState: PropTypes.objectOf(PropTypes.object),\n  location: PropTypes.objectOf(PropTypes.object),\n  logUpHandler: PropTypes.func,\n  signInWithFB: PropTypes.func,\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withRouter(Register));\n"]},"metadata":{},"sourceType":"module"}