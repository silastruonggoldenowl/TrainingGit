{"ast":null,"code":"import _regeneratorRuntime from\"/home/silas/Desktop/Program/goldenOwl/TrainingGit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/silas/Desktop/Program/goldenOwl/TrainingGit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"/home/silas/Desktop/Program/goldenOwl/TrainingGit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/silas/Desktop/Program/goldenOwl/TrainingGit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/silas/Desktop/Program/goldenOwl/TrainingGit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/silas/Desktop/Program/goldenOwl/TrainingGit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from\"react-redux\";import{Redirect}from\"react-router-dom\";import{withRouter}from\"react-router\";import{Formik}from\"formik\";import firebaseConfig from\"../config/configFirebase\";import{signInAction,signInWithFbAction}from\"../store/actions/authActions\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);_this=_super.call(this);_this.onSubmitForm=function(values){var logInHandler=_this.props.logInHandler;var email=values.email,password=values.password;firebaseConfig.firebase.auth().signInWithEmailAndPassword(email,password).then(function(result){logInHandler({email:result.user.email});}).catch(function(e){alert(e.code);});};_this.formView=function(props){var errors=props.errors,handleSubmit=props.handleSubmit,handleChange=props.handleChange,touched=props.touched,handleBlur=props.handleBlur;// const a = {};\n// console.log(a.b.c);\nreturn/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"display-4 font-weight-bold mb-3\",children:\"Sign In\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border border-1 p-2 my-1 w-100 form-control\",placeholder:\"Username\",name:\"email\",onChange:handleChange,onBlur:handleBlur}),/*#__PURE__*/_jsx(\"div\",{children:errors.email&&touched.email&&errors.email||\" \"}),/*#__PURE__*/_jsx(\"input\",{className:\"border border-1 p-2 my-1 w-100 form-control\",placeholder:\"Password\",name:\"password\",type:\"Password\",onChange:handleChange,onBlur:handleBlur}),/*#__PURE__*/_jsx(\"div\",{children:errors.password&&touched.password&&errors.password}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\"// disabled={isSubmitting}\n,className:\"btn btn-primary my-1 w-100\",children:\"Sign In\"}),/*#__PURE__*/_jsx(\"div\",{onClick:_this.onClickSignInWithFB,\"aria-hidden\":\"true\",className:\"btn btn-success my-1 w-100\",children:\"Sign in with FB\"})]})});};_this.onClickSignInWithFB=function(){firebaseConfig.firebase.auth().signInWithPopup(firebaseConfig.FBProvider).then(_this.handlerLoginWithFB).catch(function(e){return alert(e);});};_this.handlerLoginWithFB=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(result){var signInWithFB;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:signInWithFB=_this.props.signInWithFB;signInWithFB(result.user.email);case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.onClickSignInWithEmail=function(){firebaseConfig.firebase.auth().createUserWithEmailAndPassword(\"example@gmail.com\",\"123456789\");};_this.state={};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this$props=this.props,authState=_this$props.authState,location=_this$props.location;if(authState.signIn){var _location$state;return/*#__PURE__*/_jsx(Redirect,{to:(location===null||location===void 0?void 0:(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.from)||\"/\"});}// console.log(authState);\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"todo-list text-center\",children:/*#__PURE__*/_jsx(Formik,{className:\"w-100\",initialValues:{email:\"\",password:\"\"},validate:function validate(values){var errors={};if(!values.email){errors.email=\"Required\";}else if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)){errors.email=\"Invalid email address\";}if(!values.password){errors.password=\"Required\";}return errors;},onSubmit:this.onSubmitForm,children:this.formView})});}}]);return Login;}(React.Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return{logInHandler:function logInHandler(data){dispatch(signInAction(data));},signInWithFB:function signInWithFB(data){dispatch(signInWithFbAction(data));}};};var mapStateToProps=function mapStateToProps(state){return{authState:state.authState};};Login.defaultProps={logInHandler:undefined,signInWithFB:undefined,authState:{signIn:false},location:{state:{from:\"/\"}}};export default connect(mapStateToProps,mapDispatchToProps)(withRouter(Login));","map":{"version":3,"sources":["/home/silas/Desktop/Program/goldenOwl/TrainingGit/src/pages/Login.jsx"],"names":["React","connect","Redirect","withRouter","Formik","firebaseConfig","signInAction","signInWithFbAction","Login","onSubmitForm","values","logInHandler","props","email","password","firebase","auth","signInWithEmailAndPassword","then","result","user","catch","e","alert","code","formView","errors","handleSubmit","handleChange","touched","handleBlur","onClickSignInWithFB","signInWithPopup","FBProvider","handlerLoginWithFB","signInWithFB","onClickSignInWithEmail","createUserWithEmailAndPassword","state","authState","location","signIn","from","test","Component","mapDispatchToProps","dispatch","data","mapStateToProps","defaultProps","undefined"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { Redirect } from \"react-router-dom\";\nimport { withRouter } from \"react-router\";\nimport { Formik } from \"formik\";\nimport firebaseConfig from \"../config/configFirebase\";\nimport { signInAction, signInWithFbAction } from \"../store/actions/authActions\";\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  onSubmitForm = (values) => {\n    const { logInHandler } = this.props;\n    const { email, password } = values;\n    firebaseConfig.firebase\n      .auth()\n      .signInWithEmailAndPassword(email, password)\n      .then((result) => {\n        logInHandler({ email: result.user.email });\n      })\n      .catch((e) => {\n        alert(e.code);\n      });\n  };\n\n  formView = (props) => {\n    const {\n      // isSubmitting,\n      errors,\n      handleSubmit,\n      handleChange,\n      touched,\n      handleBlur,\n    } = props;\n    // const a = {};\n    // console.log(a.b.c);\n    return (\n      <form onSubmit={handleSubmit}>\n        <div className=\"\">\n          <h2 className=\"display-4 font-weight-bold mb-3\">Sign In</h2>\n          <input\n            className=\"border border-1 p-2 my-1 w-100 form-control\"\n            placeholder=\"Username\"\n            name=\"email\"\n            onChange={handleChange}\n            onBlur={handleBlur}\n          />\n          <div>{(errors.email && touched.email && errors.email) || \" \"}</div>\n          <input\n            className=\"border border-1 p-2 my-1 w-100 form-control\"\n            placeholder=\"Password\"\n            name=\"password\"\n            type=\"Password\"\n            onChange={handleChange}\n            onBlur={handleBlur}\n          />\n          <div>{errors.password && touched.password && errors.password}</div>\n          <button\n            type=\"submit\"\n            // disabled={isSubmitting}\n            className=\"btn btn-primary my-1 w-100\"\n          >\n            Sign In\n          </button>\n\n          <div\n            onClick={this.onClickSignInWithFB}\n            aria-hidden=\"true\"\n            className=\"btn btn-success my-1 w-100\"\n          >\n            Sign in with FB\n          </div>\n        </div>\n      </form>\n    );\n  };\n\n  onClickSignInWithFB = () => {\n    firebaseConfig.firebase\n      .auth()\n      .signInWithPopup(firebaseConfig.FBProvider)\n      .then(this.handlerLoginWithFB)\n      .catch((e) => alert(e));\n  };\n\n  handlerLoginWithFB = async (result) => {\n    const { signInWithFB } = this.props;\n    signInWithFB(result.user.email);\n  };\n\n  onClickSignInWithEmail = () => {\n    firebaseConfig.firebase\n      .auth()\n      .createUserWithEmailAndPassword(\"example@gmail.com\", \"123456789\");\n  };\n\n  render() {\n    const { authState, location } = this.props;\n    if (authState.signIn) {\n      return <Redirect to={location?.state?.from || \"/\"} />;\n    }\n    // console.log(authState);\n    return (\n      <div className=\"todo-list text-center\">\n        <Formik\n          className=\"w-100\"\n          initialValues={{ email: \"\", password: \"\" }}\n          validate={(values) => {\n            const errors = {};\n            if (!values.email) {\n              errors.email = \"Required\";\n            } else if (\n              !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)\n            ) {\n              errors.email = \"Invalid email address\";\n            }\n            if (!values.password) {\n              errors.password = \"Required\";\n            }\n            return errors;\n          }}\n          onSubmit={this.onSubmitForm}\n        >\n          {this.formView}\n        </Formik>\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  logInHandler: (data) => {\n    dispatch(signInAction(data));\n  },\n  signInWithFB: (data) => {\n    dispatch(signInWithFbAction(data));\n  },\n});\nconst mapStateToProps = (state) => ({\n  authState: state.authState,\n});\n\nLogin.defaultProps = {\n  logInHandler: undefined,\n  signInWithFB: undefined,\n  authState: {\n    signIn: false,\n  },\n  location: {\n    state: {\n      from: \"/\",\n    },\n  },\n};\n\nLogin.propTypes = {\n  signInWithFB: PropTypes.func,\n  authState: PropTypes.exact({\n    signIn: PropTypes.bool,\n  }),\n  location: PropTypes.exact({\n    state: PropTypes.exact({\n      from: PropTypes.string,\n    }),\n    pathname: PropTypes.string,\n    search: PropTypes.string,\n    hash: PropTypes.string,\n    key: PropTypes.string,\n  }),\n  logInHandler: PropTypes.func,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Login));\n"]},"metadata":{},"sourceType":"module"}